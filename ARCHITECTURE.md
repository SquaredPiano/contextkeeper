# Architecture Diagram

## System Overview

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         VSCODE EXTENSION                            â”‚
â”‚                         (extension.ts)                              â”‚
â”‚                                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚  â”‚   MOCK PHASE    â”‚   ONE LINE SWAP    â”‚   REAL PHASE    â”‚       â”‚
â”‚  â”‚   (Demo Ready)  â”‚ â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•>  â”‚ (After Backend) â”‚       â”‚
â”‚  â”‚                 â”‚                    â”‚                 â”‚       â”‚
â”‚  â”‚ MockContext     â”‚                    â”‚ ContextService  â”‚       â”‚
â”‚  â”‚ MockAI          â”‚                    â”‚ AIService       â”‚       â”‚
â”‚  â”‚ MockGit         â”‚                    â”‚ GitService      â”‚       â”‚
â”‚  â”‚ MockVoice       â”‚                    â”‚ VoiceService    â”‚       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”‚           â”‚                                      â”‚                â”‚
â”‚           â”‚         SAME INTERFACE               â”‚                â”‚
â”‚           â”‚    (src/services/interfaces.ts)     â”‚                â”‚
â”‚           â”‚                                      â”‚                â”‚
â”‚           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â”‚
â”‚                              â”‚                                    â”‚
â”‚                              â”‚ Events                             â”‚
â”‚                              â”‚ (contextCollected,                 â”‚
â”‚                              â”‚  analysisComplete, etc.)           â”‚
â”‚                              â”‚                                    â”‚
â”‚           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”‚
â”‚           â”‚                                     â”‚                â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚    â”‚ Status Bar  â”‚                    â”‚  Notifications  â”‚       â”‚
â”‚    â”‚  Manager    â”‚                    â”‚    Manager      â”‚       â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”‚           â”‚                                                      â”‚
â”‚           â”‚                                                      â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚    â”‚   Sidebar Webview       â”‚       â”‚  Issues Tree     â”‚      â”‚
â”‚    â”‚   Provider              â”‚       â”‚  Provider        â”‚      â”‚
â”‚    â”‚  (dashboard.html)       â”‚       â”‚  (hierarchy)     â”‚      â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

                              â”‚
                              â”‚ VSCode APIs
                              â”‚
                              â–¼

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         VSCODE UI                                   â”‚
â”‚                                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚  â”‚  Activity Bar                                          â”‚       â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”                                              â”‚       â”‚
â”‚  â”‚  â”‚  ðŸ¤– â”‚ â—„â”€ Click to open                            â”‚       â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”˜                                              â”‚       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”‚                                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚  â”‚  Sidebar (when robot clicked)                         â”‚       â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚       â”‚
â”‚  â”‚  â”‚  Dashboard (Webview)                        â”‚    â”‚       â”‚
â”‚  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚    â”‚       â”‚
â”‚  â”‚  â”‚  â”‚  Developer Context                 â”‚    â”‚    â”‚       â”‚
â”‚  â”‚  â”‚  â”‚  â€¢ Active File: extension.ts       â”‚    â”‚    â”‚       â”‚
â”‚  â”‚  â”‚  â”‚  â€¢ Files Edited: 12                â”‚    â”‚    â”‚       â”‚
â”‚  â”‚  â”‚  â”‚  â€¢ Total Edits: 47                 â”‚    â”‚    â”‚       â”‚
â”‚  â”‚  â”‚  â”‚  â€¢ Branch: feature/...             â”‚    â”‚    â”‚       â”‚
â”‚  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚    â”‚       â”‚
â”‚  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚    â”‚       â”‚
â”‚  â”‚  â”‚  â”‚  AI Analysis                       â”‚    â”‚    â”‚       â”‚
â”‚  â”‚  â”‚  â”‚  â€¢ Issues Found: 5                 â”‚    â”‚    â”‚       â”‚
â”‚  â”‚  â”‚  â”‚  â€¢ Risk Level: MEDIUM              â”‚    â”‚    â”‚       â”‚
â”‚  â”‚  â”‚  â”‚  â€¢ Confidence: 87%                 â”‚    â”‚    â”‚       â”‚
â”‚  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚    â”‚       â”‚
â”‚  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚    â”‚       â”‚
â”‚  â”‚  â”‚  â”‚  âš ï¸  Unused variable (line 42)     â”‚    â”‚    â”‚       â”‚
â”‚  â”‚  â”‚  â”‚  ðŸ”´ Null reference (line 67)       â”‚    â”‚    â”‚       â”‚
â”‚  â”‚  â”‚  â”‚  ðŸ’¡ Refactor suggestion (line 89)  â”‚    â”‚    â”‚       â”‚
â”‚  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚    â”‚       â”‚
â”‚  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚    â”‚       â”‚
â”‚  â”‚  â”‚  â”‚  ðŸ” Analyze Now                    â”‚    â”‚    â”‚       â”‚
â”‚  â”‚  â”‚  â”‚  ðŸ”„ Refresh Context                â”‚    â”‚    â”‚       â”‚
â”‚  â”‚  â”‚  â”‚  âš™ï¸  Autonomous Mode: OFF          â”‚    â”‚    â”‚       â”‚
â”‚  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚    â”‚       â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚       â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚       â”‚
â”‚  â”‚  â”‚  Issues Found (Tree View)                   â”‚    â”‚       â”‚
â”‚  â”‚  â”‚  ðŸ“ Issues (5)                              â”‚    â”‚       â”‚
â”‚  â”‚  â”‚    â”œâ”€ ðŸ“„ extension.ts (3)                  â”‚    â”‚       â”‚
â”‚  â”‚  â”‚    â”‚   â”œâ”€ âš ï¸  Line 42                      â”‚    â”‚       â”‚
â”‚  â”‚  â”‚    â”‚   â”œâ”€ ðŸ”´ Line 67                      â”‚    â”‚       â”‚
â”‚  â”‚  â”‚    â”‚   â””â”€ ðŸ’¡ Line 89                      â”‚    â”‚       â”‚
â”‚  â”‚  â”‚    â””â”€ ðŸ“„ MockAI.ts (2)                     â”‚    â”‚       â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”‚                                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚  â”‚  Status Bar (Bottom)                                   â”‚       â”‚
â”‚  â”‚  ðŸ¤– Copilot: Ready  [Click to open] â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â”‚       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”‚                                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Data Flow

### 1. User Clicks "Analyze Now"

```
User Action
    â”‚
    â–¼
Dashboard HTML
    â”‚ postMessage({ type: 'triggerAnalysis' })
    â–¼
SidebarWebviewProvider
    â”‚ onDidReceiveMessage()
    â–¼
Extension.ts
    â”‚ handleWebviewMessage()
    â–¼
AIService (Mock or Real)
    â”‚ analyze()
    â”‚
    â”œâ”€ emit('analysisStarted')
    â”‚     â”‚
    â”‚     â”œâ”€> StatusBar updates: "Analyzing..."
    â”‚     â””â”€> Dashboard shows: "Starting..."
    â”‚
    â”œâ”€ emit('analysisProgress', 50, 'message')
    â”‚     â”‚
    â”‚     â”œâ”€> StatusBar: "Analyzing... 50%"
    â”‚     â””â”€> Dashboard: "Checking patterns..."
    â”‚
    â””â”€ emit('analysisComplete', analysis)
          â”‚
          â”œâ”€> StatusBar: "Found 5 issues"
          â”œâ”€> Dashboard: Updates issue list
          â”œâ”€> TreeView: Updates tree structure
          â””â”€> Notification: "Analysis complete!"
```

### 2. Service Swap (Integration)

```
BEFORE (Mock):                    AFTER (Real):
â”œâ”€ extension.ts                   â”œâ”€ extension.ts
â”‚   import { MockAIService }      â”‚   import { AIService }
â”‚   ...                           â”‚   ...
â”‚   aiService = new MockAI()      â”‚   aiService = new AI()
â”‚                                 â”‚
â””â”€ MockAIService                  â””â”€ AIService
    â”‚                                 â”‚
    â”œâ”€ analyze()                      â”œâ”€ analyze()
    â”‚   return fake data              â”‚   call Gemini API
    â”‚                                 â”‚
    â””â”€ emit events                    â””â”€ emit events
        â†“                                 â†“
    SAME EVENTS!                      SAME EVENTS!
        â†“                                 â†“
    UI updates                        UI updates
    (no changes needed!)              (works automatically!)
```

## Component Communication

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              EVENT BUS PATTERN                     â”‚
â”‚                                                    â”‚
â”‚  Services (emit) â”€â”€â”€â”€â”€â”€â”€â”€> Extension (listen)     â”‚
â”‚                                                    â”‚
â”‚  Extension (call) â”€â”€â”€â”€â”€â”€â”€> UI Components (update) â”‚
â”‚                                                    â”‚
â”‚  Webview (message) â”€â”€â”€â”€â”€â”€> Extension (handle)     â”‚
â”‚                                                    â”‚
â”‚  Extension (message) â”€â”€â”€â”€> Webview (receive)      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## File Dependency Graph

```
extension.ts
    â”‚
    â”œâ”€ Imports
    â”‚   â”œâ”€ services/interfaces.ts â—„â”€â”€ THE CONTRACT
    â”‚   â”œâ”€ services/mock/*.ts (or services/real/*.ts)
    â”‚   â”œâ”€ ui/StatusBarManager.ts
    â”‚   â”œâ”€ ui/SidebarWebviewProvider.ts
    â”‚   â”œâ”€ ui/IssuesTreeProvider.ts
    â”‚   â””â”€ ui/NotificationManager.ts
    â”‚
    â”œâ”€ Instantiates
    â”‚   â”œâ”€ contextService (Mock or Real)
    â”‚   â”œâ”€ aiService (Mock or Real)
    â”‚   â”œâ”€ gitService (Mock or Real)
    â”‚   â”œâ”€ voiceService (Mock or Real)
    â”‚   â”œâ”€ statusBar
    â”‚   â”œâ”€ sidebarProvider
    â”‚   â””â”€ issuesTreeProvider
    â”‚
    â””â”€ Orchestrates
        â”œâ”€ setupServiceListeners()
        â”œâ”€ registerCommands()
        â”œâ”€ handleWebviewMessage()
        â”œâ”€ refreshContext()
        â””â”€ runAnalysis()
```

## Integration Points

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ONLY 4 LINES TO CHANGE IN EXTENSION.TS     â”‚
â”‚                                              â”‚
â”‚  Line 10:  Import Mock â†’ Import Real        â”‚
â”‚  Line 11:  Import Mock â†’ Import Real        â”‚
â”‚  Line 12:  Import Mock â†’ Import Real        â”‚
â”‚  Line 13:  Import Mock â†’ Import Real        â”‚
â”‚                                              â”‚
â”‚  Line 41:  new Mock() â†’ new Real()          â”‚
â”‚  Line 42:  new Mock() â†’ new Real()          â”‚
â”‚  Line 43:  new Mock() â†’ new Real()          â”‚
â”‚  Line 44:  new Mock() â†’ new Real()          â”‚
â”‚                                              â”‚
â”‚  THAT'S IT! UI WORKS AUTOMATICALLY!          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## State Machine (Status Bar)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  IDLE   â”‚ â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Ready   â”‚                       â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜                       â”‚
     â”‚ User clicks               â”‚
     â”‚ "Analyze Now"             â”‚
     â”‚                           â”‚
     â–¼                           â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                     â”‚
â”‚ANALYZING â”‚                     â”‚
â”‚ Progress â”‚                     â”‚ 5 seconds
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜                     â”‚ timeout
     â”‚ Analysis                  â”‚
     â”‚ completes                 â”‚
     â”‚                           â”‚
     â–¼                           â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                     â”‚
â”‚ COMPLETE â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚Found N   â”‚  Auto-reset
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
     â”‚ Error occurs
     â”‚
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ERROR  â”‚
â”‚ Error   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Message Flow (Webview â†” Extension)

```
Dashboard (HTML/JS)              Extension (TypeScript)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€            â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

User clicks button
    â”‚
    â–¼
vscode.postMessage({
  type: 'triggerAnalysis'
})  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•>  onDidReceiveMessage()
                                       â”‚
                                       â–¼
                                handleWebviewMessage()
                                       â”‚
                                       â–¼
                                runAnalysis()
                                       â”‚
                                       â–¼
                                Service emits event
                                       â”‚
                                       â–¼
                                UI updates
                                       â”‚
                                       â–¼
webview.postMessage({         <â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  type: 'analysisComplete',
  payload: analysis
})
    â”‚
    â–¼
window.addEventListener('message')
    â”‚
    â–¼
updateAnalysis(payload)
    â”‚
    â–¼
DOM updates (user sees results)
```

---

**Legend:**
- `â”‚ â–¼` = Sequential flow
- `â•>` = Message passing
- `<â”€` = Callback/return
- `â”Œâ”€â”` = Component boundaries
- `...` = Code or logic
